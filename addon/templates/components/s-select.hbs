<div class="es-control {{controlClass}}">
  <div class="es-input" {{action 'focus'}}>
    {{#if hasValues}}
      <span class="es-selections">
        {{#each values as |option|}}
          <span {{action 'remove' option}}>
            {{if (get option labelKey) (get option labelKey) option}} ×
          </span>
        {{/each}}
      </span>
    {{/if}}

    <input type="text"
      autocomplete="off"
      disabled={{disabled}}
      required={{required}}
      autofocus={{autofocus}}
      placeholder={{unless hasValues placeholder ''}}
      readonly={{unless canSearch 'readonly'}}
      oninput={{action 'change' value='target.value'}}
      onkeydown={{action 'keypress'}}
      onfocus={{action 'focus'}}
      onblur={{action 'blur'}}>
  </div>

  {{#if canClear}}
    <span class="es-clear-zone" title="Clear" aria-label="Clear" {{action 'clear'}}>
      <span class="es-clear">×</span>
    </span>
  {{/if}}

  {{#if hasDropdown}}
    <span class="es-arrow-zone" {{action 'dropdown' on='mouseDown'}}>
      <span class="es-arrow"></span>
    </span>
  {{/if}}
</div>

<div class="es-options-container" hidden={{hideDropdown}}>
  {{component dropdown
    model=model token=token values=values
    labelKey=labelKey valueKey=valueKey
    shouldFilter=shouldFilter
    keyEvent=keyEvent
    freeText=freeText
    optionClass=optionClass
    groupClass=groupClass
    select=(action 'select')}}
</div>
